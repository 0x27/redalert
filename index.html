<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>&#39;Red&#39; Alert by sachinio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">&#39;Red&#39; Alert</h1>
      <h2 class="project-tagline">&quot;Its just algorithms&quot; - someone</h2>
      <a href="https://github.com/sachinio/redalert" class="btn">View on GitHub</a>
      <a href="https://github.com/sachinio/redalert/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sachinio/redalert/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="what-is-red-alert-" class="anchor" href="#what-is-red-alert-" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is 'Red' Alert ?</h3>

<p>This is a notification system built for the Power BI Team @ Microsoft. The main contoller runs on the raspberry pi. Some parts of the system work in conjuntion with special hardware. An example is the NeoPixel class which uses an XBee to comunicate light sequences to arduinos connected with neopixel strips.</p>

<h3>
<a id="architecture" class="anchor" href="#architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>Architecture</h3>

<p>The system consists of a raspberry pi connected to a mesh of neo pixel strips via the use of XBee ZB modules. The raspberry pi runs a number of automated task such as build health, stock price, weather, etc. The report it generates can be accessed via the timeline that is hosted on its own apache service. </p>

<p>Tasks also have access to external peripherals connected to the pi, such as the neo pixel strips, speakers &amp; usb missile launchers. </p>

<h3>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup</h3>

<p>Setting this up on a raspberry pi is simple, just copy and run setup.py as follows :-</p>

<pre><code>sudo python3 setup.py
</code></pre>

<p>This will install &amp; create all the required libraries and folder structures. Depending on the hooks required, you might need to manually create the options.csv file in /var/www/tmp, and fill the required fields as shown</p>

<pre><code>slack_token,your_token
vso_password,your_password
buildbroken,False
gmail_username,your_username
gmail_password,your_password
vso_username,your_username
weather_key,your_api_id
</code></pre>

<p>In addition, you will also need to manually create a cronjob to execute runner.py every minute. This will launch ITasks which are setup to execute at specific times during the day.</p>

<h3>
<a id="itask" class="anchor" href="#itask" aria-hidden="true"><span class="octicon octicon-link"></span></a>ITask</h3>

<p>ITasks are extensible units of the system. It is a script that when run preforms a specific operation. An example is the weather task, which checks the weather in Redmond, and posts it to the timeline. The tasks's <strong>run</strong>(self, time) method takes in a time parameter which can be used to control when a task is run, since the runner will launch all tasks every minute. </p>

<p>A sample implementation of a task looks like this :-</p>

<div class="highlight highlight-python"><pre><span class="pl-k">from</span> common <span class="pl-k">import</span> ITask

<span class="pl-k">class</span> <span class="pl-en">MyTask</span>(<span class="pl-e">ITask</span>):
    <span class="pl-k">def</span> <span class="pl-en"><span class="pl-c1">__init__</span></span>(<span class="pl-smi">self</span>):
        <span class="pl-k">pass</span>

    <span class="pl-k">def</span> <span class="pl-en">__run__</span>(<span class="pl-smi">self</span>, <span class="pl-smi">time</span>):
        <span class="pl-k">if</span> time[<span class="pl-s"><span class="pl-pds">'</span>hour<span class="pl-pds">'</span></span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>12<span class="pl-pds">'</span></span> <span class="pl-k">and</span> time[<span class="pl-s"><span class="pl-pds">'</span>min<span class="pl-pds">'</span></span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>00<span class="pl-pds">'</span></span>:
            <span class="pl-k">print</span>(<span class="pl-s"><span class="pl-pds">'</span>Wooo its 12pm!<span class="pl-pds">'</span></span>)</pre></div>

<p>Once you create a new task, remember to add it to the runner.py, so the runner can launch it.</p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>Sachin Patney</p>

<h3>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h3>

<p>Part of the Power BI team &amp; having trouble getting setup? Contact me. If you are not part of the Power BI team, I am afraid I will be unable to provide you with any support. Feel free to file issues that you think might be genuine bugs.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sachinio/redalert">&#39;Red&#39; Alert</a> is maintained by <a href="https://github.com/sachinio">sachinio</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>


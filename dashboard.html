<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="css\style.css">
</head>
<body>
<select id="addr">
    <option value='"00 13 A2 00 40 C1 AC 62"'>Sachin</option>
    <option value='"00 13 A2 00 40 CA B4 1E"'>Diego</option>
    <option value='"00 00 00 00 00 00 FF FF"'>Broadcast</option>
</select>
<select id="cmd">
    <option value='R'>Running</option>
    <option value='P'>Police</option>
    <option value='F'>Flashing</option>
    <option value='S'>Still</option>
    <option value="D">Disco</option>
    <option value="G">Glow</option>
    <option value="O">Off</option>
</select>
<input id="del" type="number" placeholder="delay in ms" value="40">
<input id="bri" type="number" placeholder="Brightness(0-100)" value="20">
<input id="rgb" type="color" placeholder="R,G,B" value="#fffc00">
<input id="tout" type="number" placeholder="Timeout in seconds" value="5">
<button class="nicebutton green" onclick="send()">Send</button>
</body>

<script>
    var send = function(){
        var addr = $("#addr option:selected").val();
        var cmd = $("#cmd option:selected").val();
        var del = $('#del').val();
        var bri = $('#bri').val();
        var rgb = $('#rgb').val();
        var tout = $('#tout').val();

        R = hexToR(rgb);
        G = hexToG(rgb);
        B = hexToB(rgb);

        rgb = R+','+G+','+B;
        run(addr,cmd,del,bri,rgb,tout);
    }
    var run = function(addr, cmd, del, bri, rgb, tout) {
        var getCmd = "lights/lights_cmd.php?cmd=" + cmd + "&del=" + del + "&bri="
                + bri + "&rgb=" + rgb + "&tout=" + tout+ "&addr=" + addr;
        console.log(addr+' '+cmd+' '+del+' '+bri+' '+rgb+' '+tout);
        $.get(getCmd, function(d){
            console.log(d);
        });
    }

    function hexToR(h) {return parseInt((cutHex(h)).substring(0,2),16)}
    function hexToG(h) {return parseInt((cutHex(h)).substring(2,4),16)}
    function hexToB(h) {return parseInt((cutHex(h)).substring(4,6),16)}
    function cutHex(h) {return (h.charAt(0)=="#") ? h.substring(1,7):h}
</script>
</html>